const db = require("../../database")
const admin = require("./Admin");

class AdminPostgreRepository {
  constructor() {
    this.db = db;
  }

  // Realiza a busca do usuário criado com o e-mail
  //Pode se alterar o oneOrNone() por query()
  async findByEmail(email) {
    const UsuarioAdminArmazenado = await this.db.oneOrNone("SELECT * FROM Admins WHERE email = $1", email)
    return UsuarioAdminArmazenado ? new admin(UsuarioAdminArmazenado) : null
  }

  //Push -- Insere novos usuários "Criação de usuários"

  async save(admin) {
    await this.db.none("INSERT INTO Admins (id,name,email,password) VALUES ($1, $2,$3,$4)", [
      admin.id,
      admin.name,
      admin.email,
      admin.password
    ])
  }
}

module.exports = AdminPostgreRepository;
